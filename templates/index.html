{% extends 'base.html' %}

{% block title %} Home {% endblock %}

{% block content %}
<style>
.vs-list--slot {
    margin-left: 0;
}

.file_list_item {
    padding: 0.25rem;
    max-width: 14rem;
}

.table_header {
    padding: 0.5rem;
    max-width: 14rem;
}

a:link {
    text-decoration: none;
    color: black;
}

a:visited {
    text-decoration: none;
    color: black;
}
.vs-con-table table {
    font-size: 1rem;
}

.vs-con-table table:hover {
    cursor: pointer;
}

th {
    font-size: 1rem;
}

.vs-pagination-primary .effect, .vs-pagination-primary .vs-pagination--buttons:hover {
    background: rgba(var(--vs-dark),1)!important;
}

.vs-pagination-primary li:hover:not(.is-current) {
    color: rgba(var(--vs-dark),1)!important;
}

</style>
<div id="app">
<vs-row>
    <vs-col vs-type="flex" vs-justify="left" vs-align="center" vs-w="9">
        <img src="/static/img/test_logo.jpg" width="4%"/>
    </vs-col>
    <vs-col v-if="admin" vs-align="center" vs-w="1" style="padding: 1rem">
        <vs-button color="dark" type="filled" href="/admin">Admin</vs-button>
    </vs-col>
    <vs-col vs-type="flex" vs-align="center" vs-w="1" style="padding: 1rem">
        <vs-button color="dark" type="filled" href="/logout">Logout</vs-button>
    </vs-col>
    <vs-col vs-type="flex" vs-align="center" vs-w="1" style="padding: 1rem">
        {{ username }}
    </vs-col>
</vs-row>

<vs-row>
    <vs-col vs-type="flex" vs-offset="0" vs-justify="center" vs-align="center" vs-w="1" style="padding: 1rem">
        <vs-button v-bind:disabled="disable_back" v-on:click="navigate_back()" radius color="dark" type="flat" icon="arrow_back"></vs-button>
    </vs-col>
    <vs-col vs-type="flex" vs-offset="0" vs-justify="center" vs-align="center" vs-w="1" style="padding: 1rem">
        <vs-button v-on:click="navigate_to(default_dir, abs_path=true)" radius color="dark" type="flat" icon="home"></vs-button>
    </vs-col>
</vs-row>

<vs-row>
    <vs-col vs-w="3" style="padding: 1rem">
        <vs-row style="max-width: 100%; padding: 1rem">
            <vs-col vs-w="12">
                <vs-table :data="current_dirs" :color="dark" pagination search>
                    <template slot="header">
                        <h3 class="table_header"> Directories </h3>
                    </template>

                    <template slot="thead">
                        <vs-th class="file_list_item"  sort-key="name">Name</vs-th>
                        <vs-th class="file_list_item" >Size</vs-th>
                    </template>

                    <template slot-scope="{data}">
                        <vs-tr :key="indextr" v-for="(tr, indextr) in data">
                            <vs-td :data="data[indextr].name">
                                <div class="file_list_item" v-on:click="navigate_to(data[indextr].name)"> {{ data[indextr].name }} </div>
                            </vs-td>
                            <vs-td>
                                0 KB
                            </vs-td>
                        </vs-tr>
                    </template>
                </vs-table>
            </vs-col>
        </vs-row>

        <vs-row style="max-width: 100%; padding: 1rem;">
            <vs-col vs-w="12">
                <vs-table :data="current_files" pagination search>
                    <template slot="header">
                        <h3 class="table_header"> Files </h3>
                    </template>

                    <template slot="thead">
                        <vs-th sort-key="name">Name</vs-th>
                        <vs-th>Size</vs-th>
                    </template>

                    <template slot-scope="{data}">
                        <vs-tr :key="indextr" v-for="(tr, indextr) in data" >
                            <vs-td :data="data[indextr].name">
                                <div class="file_list_item">
                                    <a :href="get_file_link(data[indextr].name)" download> {{ data[indextr].name }} </a>
                                </div>
                            </vs-td>
                            <vs-td>
                                0 KB
                            </vs-td>
                        </vs-tr>
                    </template>
                </vs-table>
            </vs-col>
        </vs-row>
    </vs-col>

    <vs-col vs-justify="center" vs-align="center" vs-w="9" style="padding: 0.5rem">
        <div id="index_viewer">

        </div>
    </vs-col>
</vs-row>

</div>
<script src="/static/js/index.js"></script>
{% endblock %}
